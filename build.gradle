task start {
    finalizedBy tasks.findByPath('backend:bootRun')
}

task buildBackend {
    finalizedBy tasks.findByPath('backend:build')
}

task buildFrontend {
    finalizedBy tasks.findByPath('frontend:build')
}

task copyStaticFiles(type: Copy) {
    from 'frontend/dist/frontend'
    into 'backend/src/main/resources/static/'
}

task clean {
    finalizedBy tasks.findByPath('backend:clean')
    finalizedBy tasks.findByPath('frontend:clean')
}

task deleteStaticFiles(type: Delete) {
    delete 'backend/src/main/resources/static/'
}

task build {
    dependsOn 'buildFrontend'
    dependsOn 'copyStaticFiles'
    finalizedBy 'buildBackend'
    finalizedBy 'deleteStaticFiles'
}
